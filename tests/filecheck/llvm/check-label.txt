; RUN: FileCheck --input-file %s %s --check-prefix=CHECKOK
;
; RUN: %ProtectFileCheckOutput \
; RUN: not FileCheck --input-file %s %s --check-prefix=CHECKFAIL --comment-prefixes=CHECKERROR 2>&1 \
; RUN: | FileCheck %s --check-prefix=CHECKERROR

label0:
a
b

label1:
b
c

label2:
a
c

; CHECKOK-LABEL: {{^}}label0:
; CHECKOK: {{^}}a
; CHECKOK: {{^}}b

; CHECKOK-LABEL: {{^}}label1:
; CHECKOK: {{^}}b
; CHECKOK: {{^}}c

; CHECKOK-LABEL: {{^}}label2:
; CHECKOK: {{^}}a
; CHECKOK: {{^}}c

; CHECKFAIL-LABEL: {{^}}label0:
; CHECKFAIL: {{^}}a
; CHECKFAIL: {{^}}b
; CHECKFAIL: {{^}}c

; CHECKERROR:      34 │ ; CHECKFAIL: {{[{][{]\^[}][}]}}c
; CHECKERROR-NEXT:  ──┬─
; CHECKERROR-NEXT:    ╰── pattern at this location was not matched

; CHECKFAIL-LABEL: {{^}}label1:
; CHECKFAIL: {{^}}a
; CHECKFAIL: {{^}}b
; CHECKFAIL: {{^}}c

; CHECKERROR:      41 │ ; CHECKFAIL: {{[{][{]\^[}][}]}}a
; CHECKERROR-NEXT:  ──┬─
; CHECKERROR-NEXT:    ╰── pattern at this location was not matched

; CHECKFAIL-LABEL: {{^}}label2:
; CHECKFAIL: {{^}}a
; CHECKFAIL: {{^}}b
; CHECKFAIL: {{^}}c

; CHECKERROR:      51 │ ; CHECKFAIL: {{[{][{]\^[}][}]}}b
; CHECKERROR-NEXT:  ──┬─
; CHECKERROR-NEXT:    ╰── pattern at this location was not matched
