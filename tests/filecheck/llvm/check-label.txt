; RUN: FileCheck --input-file %s %s --check-prefix=CHECKOK
;
; RUN: %ProtectFileCheckOutput \
; RUN: not FileCheck --input-file %s %s --check-prefix=CHECKFAIL --comment-prefixes=CHECKERROR 2>&1 \
; RUN: | FileCheck %s --check-prefix=CHECKERROR

label0:
a
b

label1:
b
c

label2:
a
c

; CHECKOK-LABEL: {{^}}label0:
; CHECKOK: {{^}}a
; CHECKOK: {{^}}b

; CHECKOK-LABEL: {{^}}label1:
; CHECKOK: {{^}}b
; CHECKOK: {{^}}c

; CHECKOK-LABEL: {{^}}label2:
; CHECKOK: {{^}}a
; CHECKOK: {{^}}c

; CHECKFAIL-LABEL: {{^}}label0:
; CHECKFAIL: {{^}}a
; CHECKFAIL: {{^}}b
; CHECKFAIL: {{^}}c

; CHECKERROR: no matches were found for expected pattern{{.*$[[:space:]].*}}check-label.txt:[[@LINE-2]]:16
; CHECKERROR-NEXT: [[@LINE-4]] │ ; CHECKFAIL{{:}} {{[{][{]\^[}][}]}}b
; CHECKERROR-NEXT: [[@LINE-4]] │ ; CHECKFAIL{{:}} {{[{][{]\^[}][}]}}c
; CHECKERROR-NEXT:  ──┬─
; CHECKERROR-NEXT:    ╰── pattern at this location was not matched

; CHECKFAIL-LABEL: {{^}}label1:
; CHECKFAIL: {{^}}a
; CHECKFAIL: {{^}}b
; CHECKFAIL: {{^}}c

; CHECKERROR: no matches were found for expected pattern{{.*$[[:space:]].*}}check-label.txt:[[@LINE-4]]:16
; CHECKERROR-NEXT: [[@LINE-6]] │ ; CHECKFAIL-LABEL{{:}} {{[{][{]\^[}][}]}}label1:
; CHECKERROR-NEXT: [[@LINE-6]] │ ; CHECKFAIL{{:}} {{[{][{]\^[}][}]}}a
; CHECKERROR-NEXT:  ──┬─
; CHECKERROR-NEXT:    ╰── pattern at this location was not matched

; CHECKFAIL-LABEL: {{^}}label2:
; CHECKFAIL: {{^}}a
; CHECKFAIL: {{^}}b
; CHECKFAIL: {{^}}c

; CHECKERROR: no matches were found for expected pattern{{.*$[[:space:]].*}}check-label.txt:[[@LINE-3]]:16
; CHECKERROR-NEXT: [[@LINE-5]] │ ; CHECKFAIL{{:}} {{[{][{]\^[}][}]}}a
; CHECKERROR-NEXT: [[@LINE-5]] │ ; CHECKFAIL{{:}} {{[{][{]\^[}][}]}}b
; CHECKERROR-NEXT:  ──┬─
; CHECKERROR-NEXT:    ╰── pattern at this location was not matched
